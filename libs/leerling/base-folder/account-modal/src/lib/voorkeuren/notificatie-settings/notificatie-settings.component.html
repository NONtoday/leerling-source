<div *ngIf="{ profiel: currentProfile$ | async } as $">
    <div class="alert" *ngIf="pushTokenBlocked$ | async">
        <span class="alert-title" tabindex="0">Het ontvangen van notificaties staat uit.</span>
        <span class="alert-detail" tabindex="0">{{ deviceSpecificNotification }}</span>
        <div class="alert-button" *ngIf="!isWeb" (click)="goToSettings()" tabindex="0">Open instellingen</div>
    </div>
    <sl-stacked-avatar *ngIf="$.profiel?.affiliation === 'parent/guardian'" [accountProfile]="$.profiel" />
    <span class="header" tabindex="0">Pushberichten</span>
    <div class="title">
        <span tabindex="0">Ontvang een pushbericht voor</span>
    </div>
    <div class="settings-wrapper">
        <div class="settings">
            <div class="settings-text">
                <span class="settings-span">Nieuwe cijfers</span>
                <span class="settings-subtext">Als er een nieuw cijfer bekend is</span>
            </div>
            @if (resultatenMeldingen() !== undefined) {
                <hmy-toggle
                    class="toggle-cijfers"
                    [ngModel]="resultatenMeldingen()"
                    [attr.aria-checked]="resultatenMeldingen()"
                    (click)="toggleResultaten()"
                    tabindex="0"
                    aria-label="Nieuwe cijfers"
                    role="checkbox"></hmy-toggle>
            } @else {
                <hmy-spinner />
            }
        </div>
        <div class="setting-divider"></div>
        <div class="settings">
            <div class="settings-text">
                <span class="settings-span">Afwezigheid</span>
                <span class="settings-subtext">Als er een nieuwe melding of maatregel over je afwezigheid bekend is</span>
            </div>
            @if (absentiesMeldingen() !== undefined) {
                <hmy-toggle
                    class="toggle-maatregelen"
                    [ngModel]="absentiesMeldingen()"
                    [attr.aria-checked]="absentiesMeldingen()"
                    (click)="toggleAbsenties()"
                    tabindex="0"
                    aria-label="Afwezigheid"
                    role="checkbox"></hmy-toggle>
            } @else {
                <hmy-spinner />
            }
        </div>
        <div class="setting-divider"></div>
        <div class="settings">
            <div class="settings-text">
                <span class="settings-span">Berichten</span>
                <span class="settings-subtext">Als je een nieuw bericht ontvangt in je Somtoday inbox</span>
            </div>
            @if (mededelingenMeldingen() !== undefined) {
                <hmy-toggle
                    class="toggle-berichten"
                    [ngModel]="mededelingenMeldingen()"
                    [attr.aria-checked]="mededelingenMeldingen()"
                    (click)="toggleMededelingen()"
                    tabindex="0"
                    aria-label="Berichten"
                    role="checkbox"></hmy-toggle>
            } @else {
                <hmy-spinner />
            }
        </div>
    </div>
</div>
